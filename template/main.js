/*FrontMainJS ver4.0.0 - SomeBottle*/
/*q.js*/
var md;if("object"!==typeof $){$={ls:[],lss:"",loadset:{},loadingjs:0,aj:function(a,c,d,h,f,g){if("false"!==a&&a){var k=new XMLHttpRequest,l="",m;for(m in c)l=l+m+"\x3d"+c[m]+"\x26";""!==f&&(a=f+a);l=l.substring(0,l.length-1);"get"==h?k.open("get",a,g):k.open("post",a,g);k.setRequestHeader("Content-type","application/x-www-form-urlencoded");k.send(l);k.onreadystatechange=function(){4==k.readyState&&200==k.status?d.success(k.responseText,a):4==k.readyState&&200!==k.status&&d.failed(k.status,a)};g||(void 0!==k.responseText?d.success(k.responseText,a):d.failed(k.status,a))}}};var SC=function(a){return"body"==a?document.body:"html"==a?document.getElementsByTagName("html")[0]:document.getElementById(a)};$.script=function(a){$.scripturl||($.scripturl=[]);var c=document.createElement("script"),d=!1,h;for(h in $.ls)if($.ls[h]==a){d=!0;break}if(!d&&-1==$.scripturl.indexOf(a)){$.loadingjs+=1;$.ls[$.ls.length]=a;c.type="text/javascript";c.src=a;$.scripturl.push(a);document.body.appendChild(c);var f=function(){--$.loadingjs;this.removeEventListener("load",f,!1)}.bind(c);c.addEventListener("load",f,!1)}c=null};$.scriptcircle=function(a,c){c=void 0===c?0:c;if(0<$.loadingjs)setTimeout(function(){$.scriptcircle(a,c+1)},100);else for(var d in a)setTimeout("try{"+a[d]+"}catch(e){console.log('Page script Error: ' + e.message);}",0)};$.ht=function(a,c,d){d=void 0===d?!0:d;var h=SC(c),f=[];if(!h)return console.log("Unable to find the Element:"+c),!1;h.innerHTML=a;os=h.getElementsByTagName("script");for(c=0;c<os.length;c++)void 0!==os[c].src&&null!==os[c].src&&""!==os[c].src?$.script(os[c].src):(a=os[c].innerHTML,d&&(a=B.r(a,"/*",""),a=B.r(a,"*/","")),f.push(a));$.scriptcircle(f);os=null};$.tr=function(a){b=a.split("?");return b[1]?b[0]:a};$.dt=function(a){if(1E7<=Number(a)){a=String(a);var c=a.slice(-4),d=c.slice(-2),h=c.substring(0,2);return a.replace(c,"")+"-"+h+"-"+d}return a};$.rmhead=function(a){var c=document.createElement("html");c.innerHTML=a;a=c.getElementsByTagName("clothhead")[0];a.parentNode.removeChild(a);a=[c.innerHTML,a.innerHTML];c.remove();return a};$.addhead=function(a){var c=SC("html").getElementsByTagName("head")[0],d=c.getElementsByTagName("clothhead");if("html"!==c.parentNode.tagName.toLowerCase())return!1;0>=d.length?(d=document.createElement("clothhead"),d.innerHTML=a,c.appendChild(d)):d[0].innerHTML=a};$.title=function(a){var c=SC("html").getElementsByTagName("head")[0],d=c.getElementsByTagName("title");0>=d.length?(d=document.createElement("title"),d.innerHTML=a,c.appendChild(d)):d[0].innerHTML=a};$.ldparse=function(a){var c=document.createElement("html");c.innerHTML=a;(a=(a=c.getElementsByTagName("loadset"))?JSON.parse(a[0].innerHTML):!1)?$.loadset=a:console.log("Failed to initialize loading page.");c.remove()};$.ecls=function(a,c,d,h){d=void 0===d?!1:d;h=void 0===h?!1:h;a=a.split(":");var f=document.getElementsByTagName("html")[0],g;switch(a[0]){case "id":g=document.getElementById(a[1]);break;case "class":g=f.getElementsByClassName(a[1]);break;case "tag":g=f.getElementsByTagName(a[1])}if(h)return g;if(g instanceof Element)d?g.classList.remove(c):g.classList.add(c);else for(var k in g)g[k]instanceof Element&&(d?g[k].classList.remove(c):g[k].classList.add(c))}}if(!B){if(localStorage["obottle-ldpage"]){var e=SC("html").innerHTML,ldlocalused=!0;$.ldparse(localStorage["obottle-ldpage"]);SC("html").innerHTML=e.replace("\x3cloadingarea\x3e\x3c/loadingarea\x3e",localStorage["obottle-ldpage"])}else ldlocalused=!1;$.aj("./loading.otp.html","",{success:function(a,c){ldlocalused||(B.hr("\x3cloadingarea\x3e\x3c/loadingarea\x3e",a),$.ldparse(a));localStorage["obottle-ldpage"]=a},failed:function(a){console.log("LoadingPage Load Failed")}},"get","",!0);$.script("./library.js");$.script("./search.js");window.htmls={};var B={moreperpage:0,r:function(a,c,d,h,f){h=void 0===h?!1:h;f=void 0===f?!0:f;if(h)return"("==h?a.replace(new RegExp("\\{\\("+c+"\\)\\}",(f?"g":"")+"i"),d):a.replace(new RegExp("\\{\\["+c+"\\]\\}",(f?"g":"")+"i"),d);if(f)for(;-1!==a.indexOf(c);)a=a.replace(c,d);else a=a.replace(c,d);return a},navlist:{statu:!1,conf:{}},navcurrent:function(a){a=void 0===a?"":a;return((-1==a.indexOf("http")?a:a.replace(window.location.protocol+"//"+window.location.hostname,""))||window.location.pathname).replace(".html","")},navcheck:function(){var a=document.body,c=this.navlist.conf;if(this.navlist.statu){var a=a.getElementsByClassName(c.navclass),d=this.navcurrent(),h;for(h in a){var f=this.navcurrent(a[h].href),g=d.lastIndexOf(f),k=d.length,l=f.length;(d==f||g+l==k&&-1!==g)&&a[h]instanceof Element?a[h].classList.add(c.activeclass):a[h]instanceof Element&&a[h].classList.contains(c.activeclass)&&a[h].classList.remove(c.activeclass)}}},nav:function(a){this.navlist.statu=!0;this.navlist.conf=a},scrolltop:function(a,c){var d=Math.floor(parseInt(document.body.scrollTop)/3),h=Math.pow(a,2)/(2*d),f=0,g=setInterval(function(){var a=document.body.scrollTop;parseInt(a)>2*d?(f+=h,document.body.scrollTop=parseInt(a)-f):parseInt(a)>d?document.body.scrollTop=parseInt(a)-f:parseInt(a)<=d&&(f-=h,f<=c&&(f=c),0>=parseInt(a)?(document.body.scrollTop=0,clearInterval(g)):document.body.scrollTop=parseInt(a)-f)},10)},hc:function(a){return a=a.replace(/&amp;/g,"\x26").replace(/&lt;/g,"\x3c").replace(/&gt;/g,"\x3e")},hr:function(a,c){var d=SC("html").innerHTML;SC("html").innerHTML=this.r(d,a,c)},deltemptags:function(a){return a.replace(/\{\((.*?)\)\}/g,"")},preventscript:function(){var a=SC("html").getElementsByTagName("script"),c;for(c in a)a[c].src&&-1==$.scripturl.indexOf(a[c].src)&&$.scripturl.push(a[c].src)},dehtml:function(a){return a.replace(/&amp;/g,"\x26").replace(/&lt;/g,"\x3c").replace(/&gt;/g,"\x3e").replace(/&nbsp;/g," ").replace(/&#039;/g,"'").replace(/&#39;/g,"'").replace(/&quot;/g,'"')},gt:function(a,c,d,h){d=void 0===d?!1:d;h=void 0===h?!1:h;d=d?d:SC("html").innerHTML;try{var f=h?d.split(a)[1]:d.split(new RegExp("\\{\\("+a+"\\)\\}","i"))[1],g=h?f.split(c)[0]:f.split(new RegExp("\\{\\("+c+"\\)\\}","i"))[0];return this.dehtml(g)}catch(k){return!1}},lazypre:function(a){var c=document.createElement("div");c.innerHTML=a;a=c.getElementsByTagName("img");for(var d in a)if(a[d].src){var h=a[d].src;a[d].src="data:image/gif;base64,R0lGODlhkAGQAYAAAP///wAAACH5BAEAAAAALAAAAACQAZABAAL/hI+py+0Po5y02ouz3rz7D4biSJbmiabqyrbuC8fyTNf2jef6zvf+DwwKh8Si8YhMKpfMpvMJjUqn1Kr1is1qt9yu9wsOi8fksvmMTqvX7Lb7DY/L5/S6/Y7P6/f8vv8PGCg4SFhoeIiYqLjI2Oj4CBkpOUlZaXmJmam5ydnp+QkaKjpKWmp6ipqqusra6voKGys7S1tre4ubq7vL2+v7CxwsPExcbHyMnKy8zNzs/AwdLT1NXW19jZ2tvc3d7f0NHi4+Tl5ufo6err7O3u7+Dh8vP09fb3+Pn6+/z9/v/w8woMCBBAsaPIgwocKFDBs6fAgxosSJFCtavIgxo8aN/xw7evwIMqTIkSRLmjyJMqXKlSxbunwJM6bMmTRr2ryJM6fOnTx7+vwJNKjQoUSLGj2KNKnSpUybOn0KNarUqVSrWr2KNavWrVy7ev0KNqzYsWTLmj2LNq3atWzbun0LN67cuXTr2r2LN6/evXz7+v0LOLDgwYQLGz6MOLHixYwbO34MObLkyZQrW76MObPmzZw7e/4MOrTo0aRLmz6NOrXq1axbu34NO7bs2bRr276NO7fu3bx7+/4NPLjw4cSLGz+OPLny5cybO38OPbr06dSrW7+OPbv27dy7e/8OPrz48eTLmz+PPr369ezbu38PP778+fTr27+PP7/+/fz7+03/D2CAAg5IYIEGHohgggouyGCDDj4IYYQSTkhhhRZeiGGGGm7IYYcefghiiCKOSGKJJp6IYooqrshiiy6+CGOMMs5IY4023ohjjm0UAAA7";""!==a[d].style.width&&(h=h+"[width]"+a[d].style.width);a[d].setAttribute("data-src","[lazy]"+h);a[d].style.width="100%"}d=c.innerHTML;c.remove();return d},lazycheck:function(){var a=window.innerHeight,c=document.documentElement.scrollTop||document.body.scrollTop,d=document.getElementsByTagName("img"),h;for(h in d)if(a+c>d[h].offsetTop){var f=d[h].getAttribute("data-src");if("undefined"!==f&&f){d[h].setAttribute("data-src","");var g=f.split("[lazy]")[1];-1!==g.indexOf("[width]")?(f=g.split("[width]"),d[h].src=f[0],d[h].style.width=f[1]):(d[h].src=f.split("[lazy]")[1],d[h].style.width="auto")}}},templonload:0,templateloaded:[],tpcheckstatu:!1,loadstatu:!1,tpcheck:function(a,c){c=void 0===c?!1:c;var d=this,h=this;if(!d.tpcheckstatu||(void 0===a?0:a)){d.tpcheckstatu=!0;d.loadshow();var f=d.gt("PageType","PageTypeEnd",c);if(window.templjson)if(window.mainjson||-1===window.templjson.usemain.indexOf(f))if("object"===typeof showdown&&"object"===typeof Base64&&localStorage["obottle-ldpage"]){d.preventscript();var g=window.templjson;g.necessary.push(f);f==g.templatehtmls.postlist&&g.necessary.push(g.templatehtmls.postitem);for(var k in g.necessary)if(-1==h.templateloaded.indexOf(g.necessary[k])){h.templonload+=1;var l=!1,m=q("r","template-"+g.necessary[k],"","","");m.c&&(l=!0,f=g.necessary[k],console.log("Template using cache:"+f),window.htmls[f]=m.c,h.templateloaded.push(f),--h.templonload);$.aj(g.necessary[k],"",{success:function(a,c){window.htmls[c]=a;l?m.c!==a?q("w","template-"+c,a,timestamp(),""):q("e","template-"+c,"","",1):(h.templateloaded.push(c),--h.templonload,q("w","template-"+c,a,timestamp(),""))},failed:function(a){console.log("Necessary HTML Load Failed...")}},"get","",!0)}var p=setInterval(function(){0>=h.templonload&&(clearInterval(p),h.renderer(c))},50),g=null}else setTimeout(function(){return h.tpcheck(!0,c)},25);else window.mainjsonrequest||(window.mainjsonrequest=!0,$.aj(window.templjson.mainjson,"",{success:function(a){window.mainjson=JSON.parse(a.replace(/[\r\n]/g,""));d.moreperpage=parseInt(window.mainjson.more_per_page)},failed:function(a){console.log("MainJson Load Failed")}},"get","",!0)),setTimeout(function(){return h.tpcheck(!0,c)},25);else $.aj("template.json","",{success:function(a){window.templjson=JSON.parse(a);return d.tpcheck(!0,c)},failed:function(a){console.log("TemplateJson Load Failed.")}},"get","",!0)}},itempage:0,switchpage:0,nowpage:0,realpage:1,searchw:"",hashexist:!1,rendering:!1,itempagefixer:function(){var a=window.mainjson,c=1,d;for(d in a.dateindex){var h=this.itempage,f=d.replace("post",""),f=a.postindex[f];c<=h&&f.link&&(this.itempage+=1);c+=1}--this.itempage},cd:function(a){for(;-1!==a.indexOf("\x3cifcover\x3e");){var c=B.gt("\x3cifcover\x3e","\x3c/ifcover\x3e",a,!0);a=B.r(a,"\x3cifcover\x3e"+c+"\x3c/ifcover\x3e","")}return a},clothmainrendered:!1,checkfirstrender:function(){var a=window.templjson,c=window.htmls[a.templatehtmls.cloth],a=window.htmls[a.templatehtmls.main];this.clothmainrendered||(console.log("first render"),a=this.r(a,"contents","\x3cdiv id\x3d'contentcontainer'\x3e\x3c/div\x3e",!0),c=this.r(c,"main",a,!0),c=$.rmhead(c),$.ht(this.deltemptags(c[0]),"container"),$.addhead(c[1]),this.clothmainrendered=!0)},back:function(){window.history.go(-1)},turnback:function(){var a=this.realpage;window.location.href=window.location.protocol+"//"+window.location.host+window.location.pathname+"#"+(1<a?a-1:1)},renderer:function(a){a=void 0===a?!1:a;var c=this;if(!c.rendering){c.rendering=!0;var d=window.templjson;md=new showdown.Converter;var h=window.htmls[d.templatehtmls.comment],f=c.gt("PageType","PageTypeEnd",a),g=window.mainjson;if(f==d.templatehtmls.post){var k=c.gt("PostContent","PostContentEnd",a),l=c.gt("PostTitle","PostTitleEnd",a),m=c.gt("PostDate","PostDateEnd",a),p=c.gt("PostTag","PostTagEnd",a),n=c.gt("PostID","PostIDEnd",a),g=c.gt("PostCover","PostCoverEnd",a);a=c.gt("MainTitle","MainTitleEnd",a).replace(/<\/?.+?>/g,"");k=c.r(window.htmls[d.templatehtmls.post],"postcontent",c.lazypre(md.makeHtml(c.hc(k.trim()))),!0);l=c.r(k,"posttitle",l,!0);k=[];isNaN(m)?p="\u9875\u9762":(k=p.split(","),p="",k.forEach(function(a,c){p=p+'\x3ca href\x3d"'+d.generatehtmls.tags+"#"+encodeURIComponent(a)+'" class\x3d"taglink"\x3e'+a+"\x3c/a\x3e,"}),p=p.substr(0,p.length-1));l=c.r(l,"posttags",p,!0);l=c.r(l,"postdate",$.dt(m),!0);l=c.r(l,"comments",h,!0);n=c.r(l,"pid",n,!0);n=c.r(n,"pagetype",f,!0);n=c.r(n,"PageType","\x3c!--[PageType]","(",!1);n=c.r(n,"PageTypeEnd","[PageTypeEnd]--\x3e","(",!1);n=g&&"none"!==g&&""!==g?c.r(n,"postcover",g,!0):c.cd(n);isNaN(m)&&(f=n.split("{(:PostEnd)}")[0]+"\x3c!--PostEnd--\x3e",g="\x3c!--Footer--\x3e"+n.split("{(Footer:)}")[1],n=f+g);c.checkfirstrender();$.title(a);$.ht(c.deltemptags(n),"contentcontainer");anichecker($.ecls($.loadset.listening,"",!1,!0),function(){c.lazycheck()});n=g=null}else if(f==d.templatehtmls.postlist){k=c.gt("PostContent","PostContentEnd",a);a=c.gt("MainTitle","MainTitleEnd",a).replace(/<\/?.+?>/g,"");l=window.htmls[d.templatehtmls.postlist];m=c.gt("PostListTemplate","PostListTemplateEnd",l);n=c.gt("MoreBtn","MoreBtnEnd",l);l=c.gt("BackBtn","BackBtnEnd",l);m=c.r(m,"morebtn","\x3cspan id\x3d'morebtn'\x3e"+n+"\x3c/span\x3e",!0);m=c.r(m,"backbtn","\x3cspan id\x3d'backbtn'\x3e"+l+"\x3c/span\x3e",!0);k=c.r(m,"postitems","\x3cdiv id\x3d'postitems'\x3e"+md.makeHtml(k.trim())+"\x3c/div\x3e",!0);l=c.r(k,"pagetype",f,!0);l=c.r(l,"PageType","\x3c!--[PageType]","(",!1);l=c.r(l,"PageTypeEnd","[PageTypeEnd]--\x3e","(",!1);c.itempage=parseInt(g.posts_per_page);c.itempagefixer();c.checkfirstrender();$.title(a);$.ht(c.deltemptags(l),"contentcontainer");l=null;c.backchecker();c.indexpagechecker();var r=setInterval(function(){if(c.gt("\x3c!--[PageType]","[PageTypeEnd]--\x3e",!1,!0)!==d.templatehtmls.postlist)return console.log("jumped out of index"),PJAX.sel("contentcontainer"),PJAX.start(),c.switchpage=0,clearInterval(r),!1;c.indexpagechecker()},100)}else if(f==d.templatehtmls.archives){a=c.gt("MainTitle","MainTitleEnd",a).replace(/<\/?.+?>/g,"");var m=window.htmls[d.templatehtmls.archives],h=c.gt("Archives","ArchivesEnd",m),t=c.gt("ArchiveTemplate","ArchiveTemplateEnd",m),w=c.gt("ArchiveItemTemplate","ArchiveItemTemplateEnd",m),x=g.dateindex,v="",u="",A=0;for(k in x){m=x[k].toString().substring(0,4);m!==A&&(A=m,""!==u&&(v=c.r(v,"archiveitems",u,!0),u=""),v+=c.r(t,"archiveyear",m,!0));var n=k.replace("post",""),l=Base64.decode(g.postindex[n].title),m=g.postindex[n].date,C="",C=g.postindex[n].link?g.postindex[n].link+".html":"post-"+n+".html",n=c.r(w,"archiveitemlink",C,!0),n=c.r(n,"archiveitemtitle",l,!0),n=c.r(n,"archiveitemdate",$.dt(m),!0),u=u+n}""!==u&&(v=c.r(v,"archiveitems",u,!0));k=c.r(h,"archives",v+"\x3c/ul\x3e",!0);l=c.r(k,"pagetype",f,!0);l=c.r(l,"PageType","\x3c!--[PageType]","(",!1);l=c.r(l,"PageTypeEnd","[PageTypeEnd]--\x3e","(",!1);c.checkfirstrender();$.title(a);$.ht(c.deltemptags(l),"contentcontainer");l=null}else if(f==d.templatehtmls.tags){a=c.gt("MainTitle","MainTitleEnd",a).replace(/<\/?.+?>/g,"");var m=window.htmls[d.templatehtmls.tags],l=c.gt("Tags","TagsEnd",m),D=c.gt("TagItemTemplate","TagItemTemplateEnd",m),k=$.tr(window.location.href),y="",g=g.postindex,z=[];for(n in g)m=g[n].tags.split(","),m.forEach(function(a,c){""!==a&&-1==z.indexOf(a)&&z.push(a)});z.forEach(function(a,d){var f=c.r(D,"tagitemtitle",a,!0),f=c.r(f,"tagitemlink","#"+encodeURIComponent(a),!0);y+=f});c.alltaghtml=y;-1!==k.indexOf("#")&&(g=k.split("#")[1],c.nowtag=g,"alltags"!==g&&(y="\x3cscript\x3eB.taguper('"+g+"');PJAX.sel('contentcontainer');PJAX.start();\x3c/script\x3e"));r=setInterval(function(){if(-1==window.location.href.indexOf(d.generatehtmls.tags)&&-1==window.location.href.indexOf(d.generatehtmls.tags.replace(".html","")))return PJAX.sel("contentcontainer"),PJAX.start(),clearInterval(r),!1;c.tagpagechecker()},100);k=c.r(l,"tags","\x3cdiv id\x3d'contenttags'\x3e"+y+"\x3c/div\x3e",!0);l=c.r(k,"pagetype",f,!0);l=c.r(l,"PageType","\x3c!--[PageType]","(",!1);l=c.r(l,"PageTypeEnd","[PageTypeEnd]--\x3e","(",!1);c.checkfirstrender();$.title(a);$.ht(c.deltemptags(l),"contentcontainer");l=null}c.tpcheckstatu=!1;c.rendering=!1;PJAX.autoprevent();PJAX.sel("contentcontainer");PJAX.start();c.navcheck();window.dispatchEvent(PJAX.PJAXFinish)}},backchecker:function(){1==this.realpage?SC("backbtn").style.display="none":SC("backbtn").style.display="initial"},nowtag:"",alltaghtml:"",taguper:function(a){a=decodeURIComponent(a);SC("html");var c=this,d=window.htmls[window.templjson.templatehtmls.tags],h=c.gt("TagListTemplate","TagListTemplateEnd",d),f=c.gt("TagListItemTemplate","TagListItemTemplateEnd",d),g=window.mainjson,d=g.dateindex,k=g.postindex,g=[],l="",m;for(m in d)d=m.replace("post",""),-1!==k[d].tags.indexOf(a)&&g.push(d);l+="\x3cul\x3e";g.forEach(function(a,d){var h=k[a],g="post-"+a+".html",m=$.dt(h.date);h.link&&(g=h.link+".html");g=c.r(f,"taglistitemlink",g,!0);g=c.r(g,"taglistitemtitle",Base64.decode(h.title),!0);g=c.r(g,"taglistitemdate",$.dt(m),!0);l+=g});l=c.r(h,"taglist",l,!0);l=c.r(l,"tagcurrent",a,!0);SC("contenttags").innerHTML=l;l=null},tagpagechecker:function(){SC("html");var a=$.tr(window.location.href);-1==a.indexOf("#")?(PJAX.pause(),window.location.replace(a+"#alltags"),PJAX.start()):(a=a.split("#")[1],this.nowtag!==a&&(this.nowtag=a,"alltags"==a?SC("contenttags")&&(SC("contenttags").innerHTML=this.alltaghtml):this.taguper(a),PJAX.start()))},indexpagechecker:function(){SC("html");var a=window.templjson,c=$.tr(decodeURIComponent(window.location.href)),d=window.mainjson,h=parseInt(d.posts_per_page),f=this;if(-1!==c.indexOf("#")){f.hashexist=!0;var g=c.split("#")[1];if(-1==c.indexOf("#!")){if(!isNaN(g)){var k=parseInt(g)-1;f.nowpage!==k&&(console.log("hash changed"),f.searchw="",f.nowpage=k,f.itempage=h*k*f.moreperpage,f.itempagefixer(),SC("postitems").innerHTML="",f.more(!0),f.realpage=k+1,f.switchpage=0,f.backchecker())}}else{var h=window.htmls[a.templatehtmls.postitem],l=f.gt("PostItem","PostItemEnd",h),h=f.gt("NoItem","NoItemEnd",h),m=c.split("#!")[1];if(m!==f.searchw){var p=function(){SC("postitems")&&SC("morebtn")&&SC("backbtn")?(window.scrollTo(0,0),SC("postitems").innerHTML=t,"function"==typeof f.searchinj&&f.searchinj(r,m,function(a){var c="",d;for(d in a)c+=isNaN(a[d])?"":w[a[d]]?"":n(r,a[d]);if(""==c)return!1;SC("postitems").innerHTML=t+c;PJAX.start()}),SC("morebtn").style.display="none",SC("backbtn").style.display="none",PJAX.start()):setTimeout(function(){return p()},10)},n=function(a,c,d,h,g,k){h=void 0===h?!1:h;g=void 0===g?!1:g;k=void 0===k?!1:k;var m="";d=(void 0===d?!1:d)||Base64.decode(a[c].title);h=h||Base64.decode(a[c].intro);g=g||a[c].date;k=k||a[c].tags;d=B.r(l,"postitemtitle",d,!0);d=B.r(d,"postitemintro",h+"...",!0);d=B.r(d,"postitemdate",$.dt(g),!0);k=B.r(d,"postitemtags",k.replace(/,/g,"\u00b7"),!0);k=a[c].link?B.r(k,"postitemlink",a[c].link+".html",!0):B.r(k,"postitemlink","post-"+c+".html",!0);k=a[c].cover?B.r(k,"postcover",a[c].cover,!0):f.cd(k);return m+k};f.searchw=m;var r=d.postindex,t="",w={};for(k in r){var c=Base64.decode(r[k].title).toLowerCase(),d=Base64.decode(r[k].intro).toLowerCase(),a=r[k].date.toLowerCase(),g=r[k].tags,x=g.toLowerCase(),m=m.toLowerCase();if(-1!==c.indexOf(m)||-1!==d.indexOf(m)||-1!==a.indexOf(m)||-1!==x.indexOf(m))t+=n(r,k,c,d,a,g),w[k]=!0}""==t&&(t=h);f.tpcheckstatu||f.loadstatu||p()}if(f.tpcheckstatu||f.loadstatu)f.searchw=""}}else f.searchw="",f.hashexist&&(f.realpage=1,f.switchpage=0,f.hashexist=!1)},loadshow:function(){this.loadstatu=!0;if($.loadset.animations){var a=$.loadset.animations["in"],c=$.loadset.animations.out,d;for(d in a)$.ecls(d,a[d]);for(d in c)$.ecls(d,c[d],!0)}},loadhide:function(){this.loadstatu=!1;var a=$.loadset.animations.out,c=$.loadset.animations["in"],d;for(d in a)$.ecls(d,a[d]);for(d in c)$.ecls(d,c[d],!0)},morehtmls:{},more:function(a){a=void 0===a?!1:a;var c=this.itempage+1,d=0,h=0,f="",g=window.mainjson,k=window.htmls[window.templjson.templatehtmls.postitem],l=this.gt("PostItem","PostItemEnd",k),k=this.gt("NoItem","NoItemEnd",k),m=parseInt(g.posts_per_page),p=g.dateindex,n;for(n in p)if(c<=h){if(d<m){var r=n.replace("post",""),p=g.postindex[r];if(p.link)this.itempage+=1,--d;else var t=B.r(l,"postitemtitle",Base64.decode(p.title),!0),t=B.r(t,"postitemintro",Base64.decode(p.intro)+"...",!0),t=B.r(t,"postitemdate",$.dt(p.date),!0),t=B.r(t,"postitemtags",p.tags.replace(/,/g,"\u00b7"),!0),r=B.r(t,"postitemlink","post-"+r+".html",!0),r=p.cover?B.r(r,"postcover",p.cover,!0):this.cd(r),f=f+r;d+=1}}else h+=1;""==f?(f=k,SC("morebtn").style.display="none"):SC("morebtn").style.display="initial";this.itempage+=m;this.switchpage>=this.moreperpage-1&&!a?(SC("postitems").innerHTML=f,this.scrolltop(20,2),this.switchpage=0,this.realpage+=1,PJAX.pause(),window.location.href="#"+this.realpage):(SC("postitems").innerHTML=SC("postitems").innerHTML+f,this.switchpage+=1);this.backchecker();PJAX.start()}};window.addEventListener("scroll",B.lazycheck,!1);window.addEventListener("pjaxstart",function(){B.loadshow()},!1);window.addEventListener("pjaxfinish",function(){B.loadhide()},!1)}function anichecker(a,c){function d(){c();a.removeEventListener(h,d)}var h="",f={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"},g;for(g in f)void 0!==a.style[g]&&(h=f[g]);a.addEventListener(h,d)}var mainhost=window.location.host,dt=(new Date).getTime();if(void 0==PJAX||null==PJAX)var PJAX={index:null===window.history.state?1:window.history.state.page,PJAXStart:new CustomEvent("pjaxstart"),PJAXFinish:new CustomEvent("pjaxfinish"),LoadedPage:{},lasthref:window.location.href,preventurl:[],recenturl:"",replace:"",statu:!0,sel:function(a){this.replace=a},jump:function(a){var c=encodeURIComponent(a),d=this,h=!1,f=d.replace;""==f&&(f="contentcontainer");if(-1!==d.recenturl.indexOf("#")&&-1!==a.indexOf("#"))return!1;-1==d.recenturl.indexOf("#")&&-1!==a.indexOf("#")&&(B.nowpage=0);window.dispatchEvent(d.PJAXStart);anichecker($.ecls($.loadset.listening,"",!1,!0),function(){window.scrollTo(0,0);if(d.LoadedPage[c])d.clearevent(),B.tpcheck(!1,d.LoadedPage[c]);else{var f=q("r",c,"","","");f.c&&(h=!0,d.clearevent(),B.tpcheck(!1,f.c));$.aj(a,{},{success:function(g){d.recenturl=a;d.LoadedPage[c]=g;h?f.c!==g?(q("w",c,g,timestamp(),""),d.clearevent(),B.tpcheck(!1,g)):q("e",c,"","",1):(d.clearevent(),B.tpcheck(!1,g),q("w",c,g,timestamp(),""))},failed:function(a){window.dispatchEvent(d.PJAXFinish)}},"get","",!0)}})},pjaxautojump:function(){PJAX.recenturl.split("#")[0]==window.location.href&&(window.history.replaceState(null,null,window.location.href+"#1"),PJAX.jump(window.location.href+"#1"));-1!==window.location.href.indexOf(mainhost)&&PJAX.jump(window.location.href)},clickevent:function(a){if(-1===PJAX.preventurl.indexOf(this.href)&&this.href&&""!=this.href)window.history.pushState(null,null,this.href),a.preventDefault(),PJAX.jump(this.href);else return!0},clearevent:function(){var a=document.getElementsByTagName("a"),c;for(c in a)"function"==typeof a[c].removeEventListener&&a[c].removeEventListener("click",this.clickevent)},start:function(){this.statu=!0;this.recenturl=window.location.href;this.clearevent();var a=document.getElementsByTagName("a"),c;for(c in a){var d=a[c]instanceof Element?a[c].getAttribute("onclick"):null;"function"!=typeof a[c].addEventListener||d||(a[c].setAttribute("pjax",""),a[c].addEventListener("click",this.clickevent,!1))}window.addEventListener("popstate",PJAX.pjaxautojump,!1)},pause:function(){this.statu=!1;window.removeEventListener("popstate",PJAX.pjaxautojump)},autoprevent:function(){var a=document.getElementsByTagName("a"),c=window.location.host,d;for(d in a)void 0!==a[d].href&&-1==a[d].href.indexOf(c)&&this.preventurl.push(a[d].href)}};function q(a,c,d,h,f){"undefined"==typeof localStorage.obottle&&(localStorage.obottle="{}");var g=0,k="",l=JSON.parse(localStorage.obottle),m=[];"undefined"!==typeof l[c]&&(g=l[c].t,k=l[c].h);if("w"==a){l=JSON.parse(localStorage.obottle);a={};a.h=d;a.t=h;a.rt=0;l[c]=a;try{localStorage.obottle=JSON.stringify(l)}catch(n){for(var p in l)(20>=Number(l[p].rt)||172800<=Number(h)-Number(l[p].t))&&delete l[p];localStorage.obottle=JSON.stringify(l)}}else{if("r"==a)return m.t=g,m.c=k,m;"e"==a&&(l=JSON.parse(localStorage.obottle),l[c].rt=Number(l[c].rt)+f,localStorage.obottle=JSON.stringify(l))}}function timestamp(){return(new Date).getTime()}B.tpcheck();